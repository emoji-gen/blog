Title: Google 開発の 2D グラフィックライブラリ Skia の紹介とはじめかた
Date: 2019-01-01 00:00
Modified: 2019-01-01 00:00
Slug: skia

みなさん、こんにちは。今回は絵文字ジェネレーターの画像生成についての記事です。

<a href="https://emoji-gen.ninja" target="_blank" rel="bookmark">絵文字ジェネレーター</a> のサーバーサイドは Python で書かれています。そして、絵文字画像の生成部分は、独自のライブラリを C++ で開発し、それを <a href="https://cython.org/">Cython</a> 経由で呼び出しています。

画像生成部分では、<a href="https://skia.org/" target="_blank" rel="noopener">Skia</a> という 2D グラフィックライブラリを中で呼び出しています。Skia は Google が中心となって開発している C++ で書かれたライブラリで、Google Chrome や Android などの大きなプロダクトでも採用されています。

この記事では、2D グラフィックライブラリである Skia の概要と、簡単な使い方を具体的なコマンド・ソースコードを交えて紹介します。次に、絵文字ジェネレーターでの Skia の利用例を解説して行こうと思います。

<!-- PELICAN_END_SUMMARY -->

## Skia とは?
Skia とは、Google が OSS として開発している 2D グラフィックライブラリです。C++11 で書かれており、スマートポインタを活用した使いやすいモダンなインターフェイスが特徴です。Skia は Google Chrome や Android など、Google のプロダクトで主に利用されています。

サポートしている動作環境も幅広く、x86_64 アーキテクチャが主流な Windows や macOS、Linux はもちろん、Android や iOS もターゲットです。Skia は多機能なライブラリであり、レポジトリも巨大です。

## Skia の簡単な使い方
### はじめに
Skia は高機能で綺麗な C++ インターフェイスを持ったライブラリなのですが、ドキュメントがほとんど用意されていません。日本語のドキュメントに至っては、ほぼ皆無です。そのため、Skia を使って本格的に開発する場合は、ある程度の覚悟が必要です。

オススメは、Skia 本体のソースコードと、Skia を使った何らかのプロジェクトを読むことです。私は Android と <a href="https://github.com/mono/SkiaSharp" target="_blank" rel="noopener">SkiaSharp</a> のソースコードを参考にしました。

この記事では、Skia を使う際にはじめに躓くであろうライブラリのビルドと、簡単なサンプルを紹介していきます。この記事をきっかけに、Skia を使う方が増えていただけると嬉しいです。

### ライブラリのビルド
Skia は C++ で書かれた巨大なライブラリであり、予めビルドが必要です。環境にもよりますが、キャッシュがない状況では 15〜30 分はかかると考えておいてください。

<small>**※ この記事では macOS (10.14 Mojave) 上で動作確認しています。Skia 自体は他の環境にも対応していますが、実行する環境に応じてコマンドを適宜書き換える必要があります。**</small>

### サンプルの作成

## 絵文字ジェネレーターでの採用事例
